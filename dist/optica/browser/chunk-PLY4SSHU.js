import{a as g,s as I}from"./chunk-RKU7U7Z5.js";import{L as h,Q as l,oa as m}from"./chunk-3POYB5FS.js";var p=class extends Error{};p.prototype.name="InvalidTokenError";function b(o){return decodeURIComponent(atob(o).replace(/(.)/g,(r,e)=>{let t=e.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function k(o){let r=o.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b(r)}catch{return atob(r)}}function w(o,r){if(typeof o!="string")throw new p("Invalid token specified: must be a string");r||(r={});let e=r.header===!0?0:1,t=o.split(".")[e];if(typeof t!="string")throw new p(`Invalid token specified: missing part #${e+1}`);let s;try{s=k(t)}catch(n){throw new p(`Invalid token specified: invalid base64 for part #${e+1} (${n.message})`)}try{return JSON.parse(s)}catch(n){throw new p(`Invalid token specified: invalid json for part #${e+1} (${n.message})`)}}var A=(()=>{class o{constructor(e,t){this.document=e,this.platformId=t,this.documentIsAccessible=I(this.platformId)}static getCookieRegExp(e){let t=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+t+"|;\\s*"+t+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return this.documentIsAccessible?(e=encodeURIComponent(e),o.getCookieRegExp(e).test(this.document.cookie)):!1}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);let s=o.getCookieRegExp(e).exec(this.document.cookie);return s[1]?o.safeDecodeURIComponent(s[1]):""}else return""}getAll(){if(!this.documentIsAccessible)return{};let e={},t=this.document;return t.cookie&&t.cookie!==""&&t.cookie.split(";").forEach(s=>{let[n,c]=s.split("=");e[o.safeDecodeURIComponent(n.replace(/^ /,""))]=o.safeDecodeURIComponent(c)}),e}set(e,t,s,n,c,d,f,x){if(!this.documentIsAccessible)return;if(typeof s=="number"||s instanceof Date||n||c||d||f){let u={expires:s,path:n,domain:c,secure:d,sameSite:f||"Lax",partitioned:x};this.set(e,t,u);return}let a=encodeURIComponent(e)+"="+encodeURIComponent(t)+";",i=s||{};if(i.expires)if(typeof i.expires=="number"){let u=new Date(new Date().getTime()+i.expires*1e3*60*60*24);a+="expires="+u.toUTCString()+";"}else a+="expires="+i.expires.toUTCString()+";";i.path&&(a+="path="+i.path+";"),i.domain&&(a+="domain="+i.domain+";"),i.secure===!1&&i.sameSite==="None"&&(i.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),i.secure&&(a+="secure;"),i.sameSite||(i.sameSite="Lax"),a+="sameSite="+i.sameSite+";",i.partitioned&&(a+="Partitioned;"),this.document.cookie=a}delete(e,t,s,n,c="Lax"){if(!this.documentIsAccessible)return;let d=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:d,path:t,domain:s,secure:n,sameSite:c})}deleteAll(e,t,s,n="Lax"){if(!this.documentIsAccessible)return;let c=this.getAll();for(let d in c)c.hasOwnProperty(d)&&this.delete(d,e,t,s,n)}static{this.\u0275fac=function(t){return new(t||o)(l(g),l(m))}}static{this.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{w as a,A as b};
