import{a as me}from"./chunk-FUQ2ZHG6.js";import{a as ce,b as se}from"./chunk-RTBOAGLI.js";import{a as ae}from"./chunk-FGX3DK5O.js";import"./chunk-ALC7XPYU.js";import{c as le}from"./chunk-QSKJPUQB.js";import"./chunk-BYXBJQAS.js";import"./chunk-FEGJ7EIX.js";import{c as ie,d as te}from"./chunk-GRH34PBR.js";import"./chunk-WRKXLIIO.js";import{a as ne,b as oe}from"./chunk-UN43G2V7.js";import"./chunk-CR4OBKMX.js";import"./chunk-FAO27LBU.js";import"./chunk-HHJS2NR3.js";import"./chunk-BA6PWFUH.js";import{a as re}from"./chunk-APJZCMIO.js";import{b as j,c as w,e as O,f as L,h as B,i as P,l as z,m as H,n as W,o as q,p as $,q as J,s as Y,u as Z}from"./chunk-GNNCE2ZH.js";import{h as ee}from"./chunk-RMY4C6JK.js";import"./chunk-F2X3VGZZ.js";import"./chunk-6FFHPBTM.js";import{Sa as K,Ta as Q,Ua as X,k as D,p as G,qa as h,ua as y,ya as U}from"./chunk-RKU7U7Z5.js";import{Ab as d,Bb as E,Ka as r,Nb as c,Ob as _,Pb as k,R as g,Rb as T,Sb as M,Tb as V,Vb as R,Wa as I,Wb as v,Y as s,Z as m,ab as b,hc as N,ib as p,lb as x,sb as t,tb as n,ub as f,vb as A,wb as F,yb as S}from"./chunk-3POYB5FS.js";import"./chunk-TSRGIXR5.js";var de=()=>({width:"37vw"}),ue=()=>({"960px":"75vw"}),fe=()=>({"border-width":"1px","border-radius":"6px","border-color":"#0284c7"}),ge=()=>({"border-width":"1px","border-radius":"6px","border-color":"#dc2626"});function _e(l,e){if(l&1){let i=S();t(0,"div",25)(1,"div",26)(2,"div",27)(3,"span",28),c(4),n(),t(5,"span",29),c(6,"Token"),n(),t(7,"span",30),c(8),n(),t(9,"div",31)(10,"div",32)(11,"p-button",33),d("click",function(){let a=s(i).$implicit,u=E();return m(u.openUpdateAppDialog(a))}),n()(),t(12,"div",19)(13,"p-button",34),d("click",function(){let a=s(i).$implicit,u=E();return m(u.confirm(a))}),n()()()()()()}if(l&2){let i=e.$implicit;r(4),_(i.nombre_aplicacion),r(4),_(i.token_aplicacion),r(3),x(v(6,fe)),r(2),x(v(7,ge))}}function ve(l,e){if(l&1&&(t(0,"span",35),c(1),n()),l&2){let i=E();r(),k(" ",i.updateApp?"Actualizar aplicaci\xF3n":"Crear nueva aplicaci\xF3n","")}}function be(l,e){if(l&1){let i=S();t(0,"div",36)(1,"div",37),f(2,"i",38),n(),t(3,"span",39),c(4),n(),t(5,"p",40),c(6),n(),t(7,"div",41)(8,"p-button",42),d("onClick",function(){let a=s(i).onReject;return m(a())}),n(),t(9,"p-button",43),d("onClick",function(){let a=s(i).onAccept;return m(a())}),n()()()}if(l&2){let i=e.$implicit;r(4),_(i.header),r(2),_(i.message),r(2),p("outlined",!0)}}var pe=class l{NO_APLICATION_MESSAGE="A\xFAn no tiene aplicaciones registradas";SUCCESS_UPDATE_MESSAGE="Se actualiz\xF3 aplicaci\xF3n correctamente";SUCCESS_REGISTER_MESSAGE="Aplicaci\xF3n registrada correctamente";SUCCESS_DELETE_MESSAGE="Aplicaci\xF3n eliminada correctamente";ERROR_TITLE="Error";SUCCESS_TITLE="Correcto";menuItems=[];dialogVisible=!1;updateApp=!1;aplicacionForm;aplicaciones=[];formBuilder=g(H);messageService=g(y);integracionService=g(ae);confirmationService=g(h);constructor(){this.aplicacionForm=this.initializeForm()}ngOnInit(){this.listAplicaciones()}initializeForm(){return this.formBuilder.group({id:[""],nombre_aplicacion:["",w.required],token_aplicacion:["",w.required]})}listAplicaciones(){this.integracionService.getListAplicaciones().subscribe({next:e=>{this.aplicaciones=e.results},error:e=>this.handleError(e)})}closeDialog(){this.updateApp=!1,this.dialogVisible=!1,this.aplicacionForm.reset()}openUpdateAppDialog(e){this.updateApp=!0,this.dialogVisible=!0,this.aplicacionForm.patchValue(e)}saveAplicacion(e){e.value.id!=null&&e.value.id!==""?this.updateExistingAplication(e.value):this.createNewAplication(e.value),this.closeDialog()}createNewAplication(e){this.integracionService.registrarColaborador(e).subscribe({next:i=>{this.listAplicaciones(),this.showSuccessMessage(i.detail||this.SUCCESS_REGISTER_MESSAGE)},error:i=>this.handleError(i)})}updateExistingAplication(e){this.integracionService.UpdateEmpleado(e).subscribe({next:i=>{this.listAplicaciones(),this.showSuccessMessage(i.detail||this.SUCCESS_UPDATE_MESSAGE)},error:i=>this.handleError(i)})}deleteAplicacion(e){this.integracionService.deleteAplicacion(e.id).subscribe({next:()=>{this.listAplicaciones()},error:i=>this.handleError(i)})}showSuccessMessage(e){this.messageService.add({severity:"success",summary:this.SUCCESS_TITLE,detail:e})}handleError(e){this.messageService.add({severity:"error",summary:this.ERROR_TITLE,detail:e?.message||"Ocurri\xF3 un error inesperado"})}confirm(e){this.confirmationService.confirm({header:"\xBFEliminar integraci\xF3n?",message:"Por favor confirma si deseas eliminar la integraci\xF3n con la aplicaci\xF3n",icon:"pi pi-trash",accept:()=>{this.deleteAplicacion(e)},reject:()=>{this.messageService.add({severity:"error",summary:"Rechazado",detail:"Proceso cancelado",life:3e3})}})}static \u0275fac=function(i){return new(i||l)};static \u0275cmp=I({type:l,selectors:[["app-integraciones"]],features:[R([y,h])],decls:38,vars:14,consts:[["cd",""],["headless",""],[1,"card"],[1,"flex","justify-between","place-content-center","mb-3"],[1,"flex","flex-col","text-center","md:text-left"],[1,"font-bold","text-2xl","text-900","m-0"],[1,"text-600","text-sm","m-0"],[1,"order-last"],["variant","outlined","label","Nueva aplicaci\xF3n",1,"flex","justify-content-end","flex-wrap",3,"click"],[1,"col-span-12"],["class","card p-1  flex flex-col lg:flex-row justify-between items-center ","style","margin: 7px 0;",4,"ngFor","ngForOf"],["styleClass","mx-4 sm:mx-0 sm:w-full md:w-8/12 lg:w-6/12","contentStyleClass","rounded-b border-t border-surface-200 dark:border-surface-700 p-0",3,"visibleChange","onHide","visible","modal","dismissableMask","breakpoints"],["pTemplate","header"],[1,"p-6"],[3,"formGroup"],[1,"flex","flex-col","gap-6","p-4","md:p-2","mt-2","mb-3"],[1,"col-12","mb-4"],["pInputText","","id","Nombre","type","text","formControlName","nombre_aplicacion","placeholder"," ",1,"w-full","md:w-25rem"],["for","Nombre"],[1,"ml-3"],[3,"control"],[1,"col-12"],["pInputText","","id","Nombre","type","text","formControlName","token_aplicacion","placeholder"," ",1,"w-full","md:w-25rem"],[1,"col-span-12","flex","justify-end","mt-6"],["pButton","","pRipple","","icon","pi pi-check",1,"w-32",3,"click","disabled","label"],[1,"card","p-1","flex","flex-col","lg:flex-row","justify-between","items-center",2,"margin","7px 0"],[1,"flex","flex-col","lg:flex-row","justify-center","items-center","px-2"],[1,"flex","flex-col","my-auto","text-center","md:text-left"],[1,"text-surface-900","font-semibold","text-xl","dark:text-surface-0","font-medium","mb-4","mt-4","lg:mt-0"],[1,"text-surface-900","dark:text-surface-0","font-medium","mb-4","mt-4","lg:mt-0"],[1,"text-surface-700","dark:text-surface-100","text-sm","mb-4","break-all"],[1,"flex","gap-2","mt-6","w-full","lg:justify-start","justify-center"],[1,""],["icon","pi pi-sync","label","Actualizar token","variant","outlined","severity","info",3,"click"],["icon","pi pi-times","label","Borrar integraci\xF3n","variant","outlined","severity","danger",3,"click"],[1,"text-400","font-semibold","tama\xF1o","text-xl","ml-3","md:p-1"],[1,"flex","flex-col","items-center","p-8","bg-surface-0","dark:bg-surface-900","rounded"],[1,"rounded-full","bg-primary","text-primary-contrast","inline-flex","justify-center","items-center","h-24","w-24","-mt-20"],[1,"pi","pi-trash","!text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-6"],[1,"mb-0"],[1,"flex","gap-2","mt-6","w-full"],["label","Cancelar","styleClass","w-64",1,"flex-1",3,"onClick","outlined"],["label","Eliminar","styleClass","w-64",1,"flex-1",3,"onClick"]],template:function(i,o){if(i&1){let a=S();f(0,"p-toast"),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1",5),c(5,"Integraciones"),n(),t(6,"p",6),c(7,"Gestiona los tokens de tus integraciones"),n()(),t(8,"div",7)(9,"p-button",8),d("click",function(){return s(a),m(o.dialogVisible=!0)}),n()()(),t(10,"div",9),A(11),b(12,_e,14,8,"div",10),F(),n()(),t(13,"p-dialog",11),V("visibleChange",function(C){return s(a),M(o.dialogVisible,C)||(o.dialogVisible=C),m(C)}),d("onHide",function(){return s(a),m(o.closeDialog())}),b(14,ve,2,1,"ng-template",12),t(15,"div",13)(16,"form",14)(17,"p-fluid",15)(18,"div",16)(19,"p-floatlabel"),f(20,"input",17),t(21,"label",18),c(22,"Nombre de la aplicacion"),n()(),t(23,"div",19),f(24,"app-error-messages",20),n()(),t(25,"div",21)(26,"p-floatlabel"),f(27,"input",22),t(28,"label",18),c(29,"Token aplicaci\xF3n"),n()(),t(30,"div",19),f(31,"app-error-messages",20),n()(),t(32,"div",23)(33,"button",24),d("click",function(){return s(a),m(o.saveAplicacion(o.aplicacionForm))}),n()()()()()(),t(34,"p-confirmdialog",null,0),b(36,be,10,3,"ng-template",null,1,N),n()}i&2&&(r(12),p("ngForOf",o.aplicaciones),r(),x(v(12,de)),T("visible",o.dialogVisible),p("modal",!0)("dismissableMask",!0)("breakpoints",v(13,ue)),r(3),p("formGroup",o.aplicacionForm),r(8),p("control",o.aplicacionForm.get("nombre_aplicacion")),r(7),p("control",o.aplicacionForm.get("token_aplicacion")),r(2),p("disabled",o.aplicacionForm.invalid)("label",o.updateApp?" Actualizar":"Guardar"))},dependencies:[oe,ne,U,le,G,D,X,K,Q,ee,Y,Z,te,ie,se,ce,q,B,j,O,L,P,z,re,J,$,me,W],encapsulation:2})};export{pe as IntegracionesComponent};
