import{a as z,b as A}from"./chunk-FUQ2ZHG6.js";import{a as M}from"./chunk-BLHMGAIS.js";import{a as O,b as U}from"./chunk-PLY4SSHU.js";import{b as P,c as j}from"./chunk-QSKJPUQB.js";import"./chunk-FEGJ7EIX.js";import"./chunk-GRH34PBR.js";import"./chunk-WRKXLIIO.js";import{a as $}from"./chunk-CR4OBKMX.js";import"./chunk-FAO27LBU.js";import"./chunk-HHJS2NR3.js";import"./chunk-BA6PWFUH.js";import"./chunk-GNNCE2ZH.js";import{h as I}from"./chunk-RMY4C6JK.js";import"./chunk-F2X3VGZZ.js";import{j as V}from"./chunk-2FN7PJJI.js";import"./chunk-6FFHPBTM.js";import{Ta as D,Ua as R,qa as b,ua as y}from"./chunk-RKU7U7Z5.js";import{Ab as x,Bb as c,Ka as n,Nb as l,Ob as s,R as u,Vb as k,Wa as E,Wb as S,Xb as T,Y as p,Z as d,ab as f,hc as g,ib as _,ka as w,nb as C,sb as t,tb as i,ub as F,yb as v}from"./chunk-3POYB5FS.js";import"./chunk-TSRGIXR5.js";var N=()=>({width:"100%",right:"0",left:"0"}),G=r=>({"920px":r}),q=()=>({"min-width":"50rem"});function H(r,o){if(r&1){let e=v();t(0,"div",11)(1,"p-button",14),x("click",function(){p(e);let m=c();return d(m.navigate("formulario/crear"))}),i()()}}function J(r,o){r&1&&(t(0,"th"),l(1,"Acciones"),i())}function K(r,o){if(r&1&&(t(0,"tr"),f(1,J,2,0,"th"),t(2,"th"),l(3,"Nombre de Formulario"),i(),t(4,"th"),l(5,"Principal"),i(),t(6,"th"),l(7,"Fecha creaci\xF3n"),i(),t(8,"th"),l(9,"Fecha Actualizaci\xF3n"),i()()),r&2){let e=c();n(),C(e.rolUsuario=="DOCTOR"?1:-1)}}function L(r,o){if(r&1){let e=v();t(0,"td",15)(1,"p-button",16),x("click",function(){p(e);let m=c().$implicit,h=c();return d(h.confirm(m.id))}),i(),t(2,"p-button",17),x("click",function(){p(e);let m=c().$implicit,h=c();return d(h.navigate("formulario/editar",m.id))}),i()()}r&2&&(n(),_("rounded",!0),n(),_("rounded",!0))}function Q(r,o){if(r&1&&(t(0,"tr"),f(1,L,3,2,"td",15),t(2,"td"),l(3),i(),t(4,"td"),l(5),i(),t(6,"td"),l(7),i(),t(8,"td"),l(9),i()()),r&2){let e=o.$implicit,a=c();n(),C(a.rolUsuario=="DOCTOR"?1:-1),n(2),s(e.nombre_formulario),n(2),s(e.principal?"Si":"No"),n(2),s(e.fecha_creacion),n(2),s(e.fecha_actualizacion)}}function W(r,o){if(r&1){let e=v();t(0,"div",18)(1,"div",19),F(2,"i",20),i(),t(3,"span",21),l(4),i(),t(5,"p",22),l(6),i(),t(7,"div",23)(8,"p-button",24),x("onClick",function(){let m=p(e).onReject;return d(m())}),i(),t(9,"p-button",25),x("onClick",function(){let m=p(e).onAccept;return d(m())}),i()()()}if(r&2){let e=o.$implicit;n(4),s(e.header),n(2),s(e.message),n(2),_("outlined",!0)}}var B=class r{formularioService=u(M);router=u(V);listadoFormularios=w([]);rolUsuario="";messageService=u(y);confirmationService=u(b);cookieService=u(U);ngOnInit(){this.loadFormularios(),this.infoUser()}loadFormularios(){this.formularioService.$consultarFormularios().subscribe({next:o=>{this.listadoFormularios.set(o.results)},error:o=>{console.error("Error fetching formularios:",o)}})}deleteFormulario(o){this.formularioService.$deleteFormulario(o).subscribe({next:()=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Formulario eliminado correctamente"}),this.loadFormularios()},error:e=>{this.messageService.add({severity:"error",summary:"Error",detail:"Error al eliminar el formulario"})}})}navigate(o,e=null){if(e){this.router.navigateByUrl(`${o}/${e}`);return}this.router.navigateByUrl(`${o}`)}confirm(o){this.confirmationService.confirm({header:"Confirmaci\xF3n",message:"Por favor confirme la eliminaci\xF3n del formulario",icon:"pi pi-trash",accept:()=>{this.deleteFormulario(o)},reject:()=>{this.messageService.add({severity:"error",summary:"Rechazado",detail:"Proceso cancelado"})}})}infoUser(){if(this.cookieService.check("refreshOptica")){let e=O(this.cookieService.get("refreshOptica"));this.rolUsuario=e.usuario.name_group}else window.location.reload()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=E({type:r,selectors:[["app-consulta-form"]],features:[k([y,b])],decls:21,vars:8,consts:[["header",""],["body",""],["cd",""],["headless",""],[3,"breakpoints"],[1,"flex","flex-row","w-full","gap-4"],[1,"card","flex","flex-col","gap-4","w-full"],[1,"flex","w-full","flex-col","md:flex-row"],[1,"flex","w-full","items-center","gap-3"],[1,"font-bold","text-2xl","text-900","m-0"],[1,"text-600","text-sm","m-0"],[1,"flex","w-full","justify-end"],[1,"flex","w-full","flex-wrap","mt-4"],[1,"w-full",3,"value","tableStyle"],["label","Crear Formulario","icon","pi pi-external-link","severity","primary","variant","outlined",3,"click"],[1,"flex","gap-2"],["icon","pi pi-trash","severity","secondary","pTooltip","Eliminar Formulario",3,"click","rounded"],["icon","pi pi-external-link","severity","secondary","pTooltip","Visualizar Formulario","tooltipPosition","left",3,"click","rounded"],[1,"flex","flex-col","items-center","p-8","bg-surface-0","dark:bg-surface-900","rounded"],[1,"rounded-full","bg-primary","text-primary-contrast","inline-flex","justify-center","items-center","h-24","w-24","-mt-20"],[1,"pi","pi-trash","!text-5xl"],[1,"font-bold","text-2xl","block","mb-2","mt-6"],[1,"mb-0"],[1,"flex","gap-2","mt-6","w-full"],["label","Cancelar","styleClass","w-64",1,"flex-1",3,"onClick","outlined"],["label","Eliminar","styleClass","w-64",1,"flex-1",3,"onClick"]],template:function(e,a){e&1&&(F(0,"p-toast",4),t(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div")(6,"h1",9),l(7,"Formularios"),i(),t(8,"p",10),l(9,"Gestiona y organiza tus formularios"),i()()(),f(10,H,2,0,"div",11),i(),t(11,"div",12)(12,"p-table",13),f(13,K,10,1,"ng-template",null,0,g)(15,Q,10,5,"ng-template",null,1,g),i()()()(),t(17,"p-confirmdialog",null,2),f(19,W,10,3,"ng-template",null,3,g),i()),e&2&&(_("breakpoints",T(5,G,S(4,N))),n(10),C(a.rolUsuario=="DOCTOR"?10:-1),n(2),_("value",a.listadoFormularios())("tableStyle",S(7,q)))},dependencies:[R,D,j,P,I,$,A,z],encapsulation:2})};export{B as ConsultaFormComponent};
